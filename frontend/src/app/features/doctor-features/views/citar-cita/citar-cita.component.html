<div class="bg-white container mx-auto p-6 shadow-md rounded-lg">

  <!-- class="flex flex-col md:flex-row min-h-screen" -->
    <!-- Encabezado -->
    <div class="bg-blue-900 text-white p-4 rounded-lg shadow-md mb-5">
      <h2 class="text-2xl font-bold text-center uppercase">
        Citas
      </h2>
    </div>

    <!-- Contenedor de filtros -->
    <div class="flex flex-wrap gap-4 mb-4">
      <!-- Campo de búsqueda por fecha
      <div class="flex-1 min-w-[200px]">
        <label for="searchDate" class="block text-sm font-medium text-gray-700">Buscar por Fecha</label>
        <input
          id="searchDate"
          type="date"
          class="mt-1 w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-sky-500"
        />
      </div> -->

      <!-- Campo de búsqueda por especialidad -->
      <div class="flex-col min-w-[200px]">
        <label for="searchSpecialty" class="block text-sm font-medium text-gray-700">Buscar por Estado</label>
        <select
          id="searchSpecialty"
          class="mt-1 w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-sky-500"
        >
          <option value="" selected>Todas los estados</option>
        </select>
      </div>
    </div>

    <!-- Tabla de citas -->
    <div class="overflow-x-auto">
      <table class="w-full border-collapse rounded-lg overflow-hidden shadow-md">
        <thead>
          <tr class="bg-[#005792] text-white text-center">
            <th class="p-2">DNI</th>
            <th class="p-2">Nombres</th>
            <th class="p-2">Apellidos</th>
            <th class="p-2">Fecha</th>
            <th class="p-2">Especialidad</th>
            <th class="p-2">Estado</th>
            <th class="p-2">Perfil Clínico</th>
            <th class="p-2">Receta</th>
          </tr>
        </thead>
        <tbody>
          <tr class="even:bg-[#EDF9FC] hover:bg-slate-200 text-center">
            <td class="p-2">080526987</td>
            <td class="p-2">Julio Cesar</td>
            <td class="p-2">Medrano Ossco</td>
            <td class="p-2">20/09/24</td>
            <td class="p-2">Psicología</td>
            <td class="p-2">Atendido</td>
            <td class="p-2 text-center align-middle">
              <button
                (click)="openProfileModal('Julio Cesar Medrano Ossco')"
                class="bg-blue-500 text-white hover:bg-deepBlue px-6 py-2 rounded-lg text-base"
              >
                Ver
              </button>
            </td>
            <td class="p-4 text-center align-middle">
              <button
                (click)="openRecipeModal('Julio Cesar Medrano Ossco')"
                class="bg-blue-500 text-white hover:bg-deepBlue px-6 py-2 rounded-lg text-base"
              >
                Agregar
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Modal de perfil clínico -->
    <div
      *ngIf="showProfileModal"
      class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"
    >
      <div class="relative bg-white p-6 rounded-lg shadow-lg w-100 border-2">
        <button
          (click)="closeProfileModal()"
          class="absolute top-3 right-3 text-gray-600 hover:text-gray-800 font-bold text-lg"
        >
          X
        </button>
        <h3 class="text-2xl font-semibold text-blue-900 mb-4 text-center">
          Información del Perfil Clínico
        </h3>
        <b>MOTIVO CONSULTA</b><br />
        Razon principal: Revision mensual por diabetes mellitus tipo 2<br />
        Observacion: Control de niveles de glucosa en sangre y evaluacion<br />

        <b>ANTECEDENTES MEDICOS</b><br />
        Diabetes Mellitus Tipo 2 (diagnosticada hace 5 años).<br />
        Hipertensión arterial (controlada).<br />
        Alergias: Ninguna conocida.<br />
        Cirugías: Apendicectomía a los 20 años.<br />

        <b>TRIAJE</b><br />
        Frecuencia cardíaca: 72 latidos/minuto.<br />
        Presión arterial: 130/85 mmHg.<br />
        Temperatura: 36.7°C.<br />
        Frecuencia respiratoria: 16 respiraciones/minuto.<br />
        Nivel de glucosa (auto-monitoreo): 150 mg/dL en ayunas<br />

        <b>EXAMENES PREVIOS</b><br />
        Último nivel de HbA1c: 7.5% (hace 3 meses).<br />
        Función renal: Dentro de límites normales (último examen hace 6
        meses).<br />
        Perfil de lípidos: Colesterol total 190 mg/dL, HDL 45 mg/dL, LDL 120 mdL
        (último examen hace 6 meses).<br />

        <b>TRATAMINETOS ACTUALES</b><br />
        Metformina 850 mg: 1 tableta dos veces al día.<br />
        Losartán 50 mg: 1 tableta diaria.<br />
        Insulina glargina: 10 unidades diarias en la noche
        <!-- Setencia para seleccion del registro del paciente -->
        <!--<p class="text-gray-700 mb-6">
          Detalles del paciente: <strong>{{ selectedPatient }}</strong>
        </p>-->
      </div>
    </div>

    <!-- Modal de receta -->
    <div
      *ngIf="showRecipeModal"
      class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"
    >
      <div
        class="relative bg-white p-6 rounded-lg shadow-lg w-4/5 h-4/5 max-w-5xl max-h-4/5 border-2 flex flex-col"
      >
        <button
          (click)="closeRecipeModal()"
          class="absolute top-3 right-3 text-gray-600 hover:text-gray-800 font-bold text-lg"
        >
          X
        </button>
        <form class="flex-1 flex space-x-6 mb-4">
          <div class="flex-1 mb-4">
            <label
              for="prescription"
              class="block font-medium text-center text-blue-900 text-xl"
            >
              Receta
            </label>
            <br />
            <textarea
              id="prescription"
              rows="13"
              class="block w-full border-2 border-blue-900 rounded-lg p-2 text-left"
              placeholder="Psicología derivado a Psiquiatra - CMP: 123456
Sertralina 50 mg
  - Tomar 1 comprimido al día por la mañana, con o sin alimentos.
  - Incrementar la dosis a 100 mg al cabo de 2 semanas, si lo indica el médico, dependiendo de la respuesta al tratamiento.
Alprazolam 0.25 mg
  - Tomar 1 comprimido dos veces al día en caso de ansiedad aguda.
  - Solo para uso a corto plazo (máximo 2 semanas) para evitar dependencia. No exceder la dosis recomendada."
            ></textarea>
          </div>
          <div class="flex-1 mb-4">
            <label
              for="notes"
              class="block font-medium text-center text-blue-900 text-xl"
            >
              Nota Adicional
            </label>
            <br />
            <textarea
              id="notes"
              rows="13"
              class="block w-full border-2 border-blue-900 rounded-lg p-2 text-left"
              placeholder="DESCRIPCIÓN
Instrucciones de uso:
- Tomar según indicaciones médicas o según la etiqueta.
Precauciones:
- No tomar más de lo indicado para evitar daños en el hígado.
- Evitar si hay alergia al paracetamol. Consultar con un médico si se tiene una enfermedad hepática o se está embarazada.
Efectos secundarios:
Generalmente bien tolerado, pero pueden ocurrir reacciones alérgicas, erupciones cutáneas, o problemas hepáticos si se toma en exceso."
            ></textarea>
          </div>
        </form>
        <div class="flex justify-center mt-auto">
          <button
            type="button"
            class="bg-blue-900 text-white hover:bg-deepBlue px-4 py-2 rounded-lg"
            (click)="saveRecipe()"
          >
            Guardar
          </button>
        </div>
      </div>
    </div>
</div>
